<!doctype html>
<html>
<head>
<!-- Analytics -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-163347557-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-163347557-1');
</script>
<!-- Analytics END -->
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <link rel="shortcut icon" type="image/png" href="favicon.png">
    
    <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css?3494">
    <link rel="stylesheet" type="text/css" href="style.css?758">
    <link rel="stylesheet" type="text/css" href="./css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="./css/feather.min.css">
    <link rel="stylesheet" type="text/css" href="./css/ionicons.min.css">
    <link href='https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900&display=swap&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/prism.css" data-noprefix />
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" }},
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
        },
        "HTML-CSS": { matchFontHeight: false },
        displayAlign: "left",
        displayIndent: "2em"
      });
    </script>
    <title>shapegui</title>


    
</head>
<body>
<script src="js/prism.js"></script>
<!-- Main container -->
<div class="page-container">
    
<!-- bloc-0 -->
<div class="bloc bgc-medium-jungle-green d-bloc" id="bloc-0">
    <div class="container bloc-sm">
        <div class="row">
            <div class="col">
                <nav class="navbar navbar-light row navbar-expand-md" role="navigation">
                    <a class="navbar-brand link-style ltc-splashed-white" href="index.html"><img src="img/amitan.png" alt="logo" class="mr-2" />Sojiro&rsquo;s Website</a>
                    <button id="nav-toggle" type="button" class="ml-auto ui-navbar-toggler navbar-toggler border-0 p-0" data-toggle="collapse" data-target=".navbar-13810" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse navbar-13810">
                        <ul class="site-navigation nav navbar-nav ml-auto">
                            <li class="nav-item">
                                <a href="index.html" class="nav-link ltc-splashed-white">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="research.html" class="a-btn nav-link ltc-splashed-white">Research</a>
                            </li>
                            <li class="nav-item">
                                <a href="python.html" class="nav-link a-btn ltc-splashed-white">Material</a>
                            </li>
                            <li class="nav-item">
                                <a href="aboutme.html" class="nav-link a-btn ltc-splashed-white">About me</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</div>
<!-- bloc-0 END -->

<!-- bloc-8 -->
<div class="bloc bgc-anti-flash-white l-bloc" id="bloc-13">
    <div class="container bloc-sm">
        <div class="row">
            <div class="col">
                <h3 class="mg-md h3-style">
                    ef-shape
                </h3>
                <p class="p-bloc-8-style">
                    Quantitative shape analysis package based on openCV<br>
                </p>
            </div>
        </div>
    </div>
</div>
<!-- bloc-8 END -->

<!-- bloc-0 -->
<div class="bloc l-bloc bloc-carousel" id="bloc-0a">
    <div class="container bloc-sm">
        <div class="row">
            <div class="col">
                <div id="carousel-1" class="carousel slide " data-ride="carousel">
                    <ol class="carousel-indicators">
                        <li data-target="#carousel-1" data-slide-to="0" class="active">
                        </li>
                        <li data-target="#carousel-1" data-slide-to="1">
                        </li>
                        <li data-target="#carousel-1" data-slide-to="2">
                        </li>
                        <li data-target="#carousel-1" data-slide-to="3">
                        </li>
                    </ol>
                    <div class="carousel-inner" role="listbox">
                        <div class="carousel-item active">
                            <img class="d-inline-block w-100" alt="slide 1" src="img/efshape_a.png" height="700" />
                            <div class="carousel-caption">
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img alt="slide 2" class="d-inline-block w-100" src="img/efshape_b.png" height="700"/>
                            <div class="carousel-caption">
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img class="d-inline-block w-100" alt="slide 3" src="img/efshape_c.png" height="700" />
                            <div class="carousel-caption">
                            </div>
                        </div>
                        <div class="carousel-item">
                            <img class="d-inline-block w-100" alt="slide 3" src="img/efshape_d.png" height="700" />
                            <div class="carousel-caption">
                            </div>
                        </div>
                    </div><a class="carousel-nav-controls carousel-control-prev" href="#carousel-1" role="button" data-slide="prev"><span class="fa fa-chevron-left"></span><span class="sr-only">Previous</span></a><a class="carousel-nav-controls carousel-control-next" href="#carousel-1" role="button" data-slide="next"><span class="fa fa-chevron-right"></span><span class="sr-only">Next</span></a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- bloc-0 END -->

<!-- bloc-11 -->
<div class="bloc bgc-anti-flash-white l-bloc" id="bloc-14">
    <div class="container bloc-sm">
        <div class="row">
            <div class="col-12">
                <!-- <h3 class="mg-clear">
                    <span class="fa fa-github"></span>&nbsp;<a href="https://github.com/SojiroFukuda/sview-gui">sviewgui</a><br>
                </h3> -->
                <p class="p-12-style">
                    <b>efshape</b>  is a python package for shape analysis of 2D image. The method is based on the combination between <b>‘Elliptic Fourier Analysis (EFA)’</b> and <b>‘Principal Component Analysis (PCA)’</b> and is called <b>EF-PCA method</b>. 
                </p>
                <p class="p-12-style">
                    The basic idea is to convert a 2D closed contour into a numeric dataset by EFA and then, using <b>multivariate analysis (PCA)</b>, detect the major shape variation of the dataset. EFA enables you to describe the complicated shape complehensively as a number of dataset called <b>elliptic Fourire descriptors (EFDs)</b>. One of the merits of this method is that you can easily reconstruct the shape from the descriptors, which also make it easier to interpret the shape variation of detected principal component axes.
                </p>
                <p class="p-12-style">
                    In this package, you can choose three different types of EF-PCA methods: one of which, EFD-based EF-PCA, is suitable for directional object like bio-forms, and the others, Amplitude- and FPS-based EF-PCA, are suitable for non-directional object such as sedimentary grain. This package provides you both CUI- and GUI-based package.
                </p>
            </div>
        </div>
    </div>
</div>
<!-- bloc-11 END -->

<!-- bloc-13 -->
<div class="bloc bgc-anti-flash-white l-bloc" id="bloc-19">
    <div class="container bloc-sm">
        <div class="row">
            <div class="col-12">
                <p class="p-12-style">
                    <h3 class="mg-clear">
                    <span class="feather-icon icon-paper"></span>&nbsp;EF-PCA method<br>
                    </h3>
                    <div class="divider-h">
                    <span class="divider"></span>
                    </div>
                    <h4 class="mg-md h4-style">Elliptic Fourier Analysis<br>
                    </h4>
                    <p class="p-12-style" >
                        As mentiond above,the basic idea of EF-PCA method is converting shape into a number of numerical dataset and summarising those dataset by mutivariate analysis.
                    </p>
                    <p class="p-12-style" >
                        Elliptic Fourier Analysis is the method to convert the 2D shape into a set of numerical dataset (<a href="https://www.sciencedirect.com/science/article/abs/pii/0146664X8290034X" target="_blank">Kuhl & Giardina, 1982</a>) . Let's imagine a closed contour and a moving point along the contour with a constant velocity. You can obtain the shape information as two periodic functions by plotting the $X$ and $Y$ coordinates of the moving point against time.
                    </p>
                    <div>
                        <img src="img/efshape_Projection.png" class="d-inline-block w-100 img-style " alt="efshape_Projection" />
                    </div>
                    </p>
                    <p class="p-12-style" >
                        These periodic functions can be approximated by Fourier series.
                    </p>
                    <p class="p-equation">

                        $ \begin{align}
                        X(t) &\simeq \sum_{n=1}^N a_n \cos (\frac{2n\pi t}{T}) + b_n \sin (\frac{2n\pi t}{T}) \label{x-coord} \\
                        Y(t) &\simeq \sum_{n=1}^N c_n \cos (\frac{2n\pi t}{T}) + d_n \sin (\frac{2n\pi t}{T}) \label{y-coord}
                         \end{align}$.
                    </p>
                    <p class="p-12-style" >
                        In these equations, the four coefficients, $a_n$, $b_n$, $c_n$ and $d_n$, are the unique parameters that determine the shape features and called <b>Elliptic Fourier Descriptors (EFDs)</b>. $N$ is the maximum frequency number of Fourier series.
                        Theoretically, as $N$ increases, the shape reconstructed by Fourier series will be more accurate and when $N$ goes infinity, the reconstructed shape will be exactly the same shape as original one.
                        However, due to the limitaiton of original image's resolution, even if you choose huge $N$, the higher frequencies of Fourier series only provide the meaningless noise, which could badly affect the later analysis.
                    </p>
                    <p class="p-12-style">
                        <b>EFDs</b> are multiple sets of numerics and it is difficult to interpret the meaning of each value.
                        To make it simple, let's convert the Eq. ($\ref{x-coord}$,$\ref{y-coord}$) to matrix form.
                    </p>
                    <p class="p-equation">
                        \begin{align} 
                        &\begin{bmatrix} X(t)\\ Y(t) \end{bmatrix} \simeq \sum_{n=1}^N {\bf H}_n \\
                        &{\bf H}_n = 
                        \begin{bmatrix} 
                        a_n & b_n \\
                        c_n & d_n
                        \end{bmatrix}
                        \begin{bmatrix} 
                        \cos \left( \frac{2n\pi t}{T} \right)  \\
                        \sin \left( \frac{2n\pi t}{T} \right)
                        \end{bmatrix}
                        \end{align}
                    </p>
                    <p class="p-12-style" >
                        Since each ${\bf H}_n$ is a formula of ellipse, it is called <b>Harmonics Ellipse</b>. The size of each harmonic ellipse can be interpreted as the amount of shape information of different scale of surface roughness. 
                    <p class="p-12-style" >
                        To understand the actual meaning and get a sense of these harmonic ellipses, let's visualise how each ellipse affects the shape. Following two GIF animations shows the examples of shape reconstruction using the UK main island. The left figure shows the example with $N=3$ and the right figure is $N=20$. 
                    </p>
                    <div class="row">
                        <div class="col-md-6 mg-md">
                            <img src="img/lazyload-ph.png" data-src="img/HE_N3_play.gif" onclick="this.setAttribute('src',this.getAttribute('data-src').replace(/_play.gif$/g, '.gif'));" style="cursor: pointer;" class="img-fluid mx-auto d-block lazyload" alt="iris_scatter" />
                        </div>
                        <div class="col-md-6 mg-md">
                            <img src="img/lazyload-ph.png" data-src="img/HE_N20_play.gif" onclick="this.setAttribute('src',this.getAttribute('data-src').replace(/_play.gif$/g, '.gif'));" style="cursor: pointer;" class="img-fluid mx-auto d-block lazyload" alt="iris_scatter" />
                        </div>
                    </div>
                    <p class="p-12-style">
                        Each harmonic ellipse is moving along the pre-number harmonic ellipse with different speed. For instance, the 3<sup>rd</sup> harmonic ellipse goes around the 2<sup>nd</sup> harmonic ellipse twice, while the 2<sup>nd</sup> harmonics ellipse goes around the 1<sup>st</sup> harmonic ellipse only once. If you look at the term inside of sin and cos term, you can find that the frequency of each ellipse is $n/T$, which means that each ellipse represents the different scale of surface roughness. 
                    </p>
                    <p class="p-12-style">
                        <b>How many harmonic ellipses are suitable for shape analysis?</b> <br> It is a bit difficult question but, theoretically, you cannot compute ellipses more than the half of the total number of coordinates of contour. This theoretical limitation determine the upper limit of the frequency of harmonics, which is called <b>'Nyquist frequency'</b>.
                        Further, even if $N$ is lower than the Nyquist frequency, in most cases, first several frequencies are enough to describe shape and higher frequency could often be a cause of error due to the various reasons such as the distortion of the photo, the condition of the sample and uncertainties caused by degitization processes.
                        
                        The amount of information that each harmonic ellipse has can be evaluated by <b>Fourier Power Spectra (FPS)</b> which is given by
                    </p>
                    <p class="p-equation">
                        \begin{align}
                        {\rm FPS}_n = \frac{a_n^2 + b_n^2 + c_n^2 + d_n^2}{2}.
                        \end{align}
                    </p>
                    <p class="p-12-style" >
                       One of the way to determine the number of frequency you use for the analysis is that calcurate the all FPS values of each frequency up to the Nyquist frequency, and then, choose the frequency where the cumulative FPS value exceed a specific threshold like 95% of total cumulative value (e.g. <a href="https://www.sciencedirect.com/science/article/abs/pii/S0925521409000921"target="_blank">Costa et al., 2009</a>).
                    </p>
                    <p class="p-12-style">
                        In short, <b>EFA</b> converts the shape into a set of numerics called <b>EFDs</b>, each set of which describes the different scale of surface roughness and called Harmonic Ellipse.
                        After EFA, you will obtain $4N$ EFDs. Thus, if you use 20 different frequencies, the target shape is described as 80 parameters for each sample.
                    </p>
                    
                    <h4 class="mg-md h4-style">Principal Component Analysis<br>
                    </h4>
                    <p class="p-12-style">
                        Principal Component Analysis (PCA) is one of the most basic <b>multivariate analyses</b>.
                        PCA is a kind of coordinate transformation. PCA transforms the original multi-dimensional coordinate system to a new system in the way that your data has the biggest deviation on the first axis of new coordinate system and has the second-biggest deviation on the second axis. By doing so, you can reduce the number of dimension by neglecting the some of the last axes that less describe the variation of dataset in new coordinate system.
                        Generally, first few new axes (called Principal Components: PCs) describes the large portion (e.g. more than 90%) of the variation of your dataset.
                    </p>
                    <p class="p-12-style">
                        What PCA does in EF-PCA method is to detect the major shape variation to visualise the shape space. 
                    </p>


    </div>
            </div>
        </div>
    </div>
</div>
<!-- bloc-13 END -->

<!-- bloc-13 -->
<div class="bloc bgc-anti-flash-white l-bloc" id="bloc-19">
    <div class="container bloc-sm">
        <div class="row">
            <div class="col-12">
                <p class="p-12-style">
                    
    </div>
            </div>
        </div>
    </div>
</div>
<!-- bloc-13 END -->

<!-- bloc-13 -->
<div class="bloc bgc-anti-flash-white l-bloc" id="bloc-15">
    <div class="container bloc-sm">
        <div class="row">
            <div class="col-12">
                <p class="p-12-style">
                    <h3 class="mg-clear">
                    <span class="feather-icon icon-paper"></span>&nbsp;Usage<br>
                    </h3>
                    <div class="divider-h">
                    <span class="divider"></span>
                    </div>
                    <p class="p-12-style" >Here is a sample code. <b>'efshape'</b> has two packages <b>'efgui'</b> and <b>'efa'</b>. Most features of this package are available in the GUI-based package 'efgui'. This <b>'efgui'</b> has only one function. </p>
                    <pre><code class="language-python">from efshape import efgui

# sample code 1
efgui.buildGUI()

</code></pre>
                </p>
                <p class="p-12-style">
                    If you build this code, GUI window like the photo bellow will open. 
                </p>
                
    </div>
            </div>
        </div>
    </div>
</div>
<!-- bloc-13 END -->

<!-- ScrollToTop Button -->
<a class="bloc-button btn btn-d scrollToTop" onclick="scrollToTarget('1',this)"><span class="fa fa-chevron-up"></span></a>
<!-- ScrollToTop Button END-->


<!-- bloc-3 -->
<div class="bloc bgc-medium-jungle-green d-bloc" id="bloc-3">
    <div class="container bloc-lg">
        <div class="row">
            <div class="col-md-3 col-sm-6">
                <h4 class="mg-md text-sm-left text-center tc-splashed-white">
                    Our Team    
                </h4><a href="https://www.hull.ac.uk/work-with-us/research/institutes/energy-and-environment-institute" class="a-btn a-block footer-link">Energy and Environment Institute</a><a href="https://www.hull.ac.uk" class="a-btn a-block footer-link">University of Hull</a><a href="https://trg.leeds.ac.uk" class="a-btn a-block footer-link">Turbidites Research Group</a>
            </div>
            <div class="col-md-3 col-sm-6">
                <h4 class="mg-md text-sm-left text-center tc-splashed-white">
                    Personal Link
                </h4><a href="https://github.com/SojiroFukuda" class="a-btn a-block footer-link">GitHub</a><a href="https://www.researchgate.net/profile/Sojiro_Fukuda" class="a-btn a-block footer-link">Research Gate</a>
            </div>
            <div class="col-md-3 col-sm-6">
                <h4 class="mg-md text-sm-left text-center tc-splashed-white">
                    Connect
                </h4>
                <div class="row">
                    <div class="col-6 col-sm-2 col offset-sm-0">
                        <div class="text-center">
                            <a href="https://www.facebook.com/jyonirou.jjj"><span class="fa fa-facebook-official icon-md"></span></a>
                        </div>
                    </div>
                    <div class="col-6 col-sm-2">
                        <div class="text-center">
                            <a href="https://twitter.com/Sojiro_Fukuda"><span class="fa fa-twitter icon-md"></span></a>
                        </div>
                    </div>
                    <div class="col-6 col-sm-2">
                        <div class="text-center">
                            <a href="https://www.instagram.com/chanu2128/"><span class="fa fa-instagram icon-md"></span></a>
                        </div>
                    </div>
                    <div class="col-6 col-sm-2">
                        <div class="text-center">
                            <a href="mailto:S.Fukuda-2018@hull.ac.uk"><span class="fa fa-envelope-o icon-md"></span></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- bloc-3 END -->

</div>
<!-- Main container END -->
    

<script src="./js/jquery-3.3.1.min.js?2684"></script>
<script src="./js/bootstrap.bundle.min.js?7948"></script>
<script src="./js/blocs.min.js?1950"></script>
<script src="./js/lazysizes.min.js" defer></script>
<!-- Additional JS END -->



<!-- Preloader -->
<div id="page-loading-blocs-notifaction" class="page-preloader"></div>
<!-- Preloader END -->

</body>
</html>
